\section{Insertion Sort}

\subsection{Insertion Sort with Sentinel}

Build up an array on the left. For each element \verb|A[i]|, move elements in the sorted part right until you get to its proper location, then insert \verb|A[i]| there.

\begin{verbatim}
A[0] = -infinity
for i in 2 to n
  t = A[i]
  j = i - 1
  while t < A[j]
    A[j + 1] = A[j]
    j = j - 1
  A[j + 1] = t
\end{verbatim}

Number of comparisons:
\begin{itemize}
    \item Best case (already sorted): $n - 1$
    \item Worst case (sorted in reverse): $\frac{n(n-1)}{2} - 1 = \frac{(n+2)(n-1)}{2}$
    \item Average case:\\
    Probability that you end up in some position $j$: $\frac 1 i$\\
    Average case: $\displaystyle \sum_{i=2}^n \sum_{j=1}^i \frac 1 i (i - j + 1) = \frac{(n-1)(n+4)}{4}$
\end{itemize}

Number of moves:\\
There are always $n$ more moves than comparisons
\begin{itemize}
    \item Best case (already sorted): $2(n-1) + 1 = 2n - 1$ (take the element out and put it right back) (+1 for the sentinel at the top)
    \item Worst case (sorted in reverse): $\displaystyle \frac{(n+2)(n-1)}{2} + n$
    \item Average case: $\displaystyle \frac{(n-1)(n+4)}{4} + n$
\end{itemize}

\subsection{Brick Stacking Problem}

Can stack arbitrarily many bricks by making top brick stick out by 1/2, brick below that stick out by 1/4, brick below that stick out by 1/6, then 1/8, 1/10, ...

Harmonic sum: $\displaystyle H_n = 1 + \frac 1 2 + \frac 1 3 + \frac 1 4 + ... + \frac 1 n \approx \ln n$

\subsection{Insertion Sort Without Sentinel}

Same as before, but instead of having sentinel, check that \verb|j| hasn't gone past the start of the list. Now, need to check that \verb|j > 0| at each iteration of the while loop, so the previous version is actually more efficient.

\begin{verbatim}
for i in 2 to n
  t = A[i]
  j = i - 1
  while j > 0 and t < A[j]
    A[j + 1] = A[j]
    j = j - 1
  A[j + 1] = t
\end{verbatim}

Number of comparisons:
\begin{itemize}
    \item Best case (already sorted): same as before: $n - 1$
    \item Worst case (sorted in reverse): $\displaystyle \mathrm{OLD} - (n-1)$
    \item Average case:\\
$\displaystyle \mathrm{OLD} - \sum_{i=2}^n \frac 1 i = \frac{(n-1)(n+4)}{4} - (H_n - 1)$
\end{itemize}

Number of moves is same as before, except you don't set the sentinel, so it's one less move.
